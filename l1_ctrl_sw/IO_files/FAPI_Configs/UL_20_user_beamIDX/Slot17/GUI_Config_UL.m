%%%%% GUI generated config file %%%% 

addpath('common','uplink','downlink',genpath('Other_codes'),'-end'); 

SYS.No_users = 20;
SYS.fc = 3500000000;
SYS.SC_RB = 12;
SYS.SCS = 30000;
SYS.Nprb = 273;
SYS.Noise_Power = -10;
SYS.No_slots = 1;
SYS.SFN = 853;
SYS.slot_offset = 17;
SYS.No_symb_slots = 14;
SYS.CELL.N_ID_cell = 20;
SYS.FFT_size = 4096;
SYS.SR = 122880000;
SYS.SR_scaling = 16;
SYS.CP_Len = 288;
SYS.CP_Len1 = 352;
SYS.num_ant = 4;
SYS.max_layers = 4;
SYS.MIB.dmrs_TypeA_Position = "pos2";

 %%% Adding default rach params - start %%%%%%%%%%%%%%%%%%%%%%%%%% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PRACH parameters
SYS.RACH.granularity = 64;									% LC error of the timing advance
SYS.RACH.NTA_offset = 25600; % FR1 = 25600 ; FR2 = 13792
SYS.RACH.ConfigurationIndex = 71;
SYS.RACH.ROOT_seq_id = 53;
SYS.RACH.zeroCorrelationZoneConfig = 8;			% Value from 0-15
SYS.RACH.restrictedSetConfig = 'U';			% Restricted sets only for high speeds
SYS.RACH.RA_start = 110;					% Value is set such that all RACH occasions are in the same UL BWP
SYS.RACH.max_occasions_f = 1;				% Value can be 1,2,4,8

t_vals = nrPRACHConfig.Tables.ConfigurationsFR1Unpaired(1+SYS.RACH.ConfigurationIndex,:);
SYS.RACH.format = t_vals.PreambleFormat{1};
SYS.RACH.slots = reshape(t_vals.SubframeNumber{1}*(SYS.SCS/15e3)+(0:t_vals.PRACHSlotsPerSubframe-1)',1,[]);
SYS.RACH.start_symbol = t_vals.StartingSymbol;
SYS.RACH.max_occasions_t = t_vals.NumTimeOccasions;
SYS.RACH.time_duration = t_vals.PRACHDuration;
[ SYS.RACH.L_RA, SYS.RACH.f_RA, SYS.RACH.N_u, SYS.RACH.N_cp ] = preamble_format(SYS.RACH.format, SYS.SCS);
SYS.RACH.N_u = SYS.RACH.N_u/SYS.SR_scaling;
SYS.RACH.N_cp = SYS.RACH.N_cp/SYS.SR_scaling;
N_CS = get_NCS(SYS.RACH.zeroCorrelationZoneConfig, SYS.RACH.restrictedSetConfig, SYS.RACH.f_RA);

base_seq_id = SYS.RACH.ROOT_seq_id;
SYS.RACH.preambles = [];
SYS.RACH.num_preambles = 64;
i = 0;
while i < SYS.RACH.num_preambles
	u = u_lookup(base_seq_id,SYS.RACH.L_RA);
	base_seq_id = base_seq_id + 1;
	C_v = get_Cv(SYS.RACH.restrictedSetConfig, SYS.RACH.L_RA, N_CS, u);
	i = i + length(C_v);
	for j = 1:length(C_v)
		SYS.RACH.preambles = [SYS.RACH.preambles ; [u C_v(j)]];
	end
end
SYS.RACH.preambles = SYS.RACH.preambles(1:SYS.RACH.num_preambles,:);
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Adding default rach params - end %%%%%%%%%%%%%%%%%%%%%%%%%% 

UE(1).UID = 1;
UE(1).C_RNTI = 1;
UE(1).num_ant = 1;
UE(1).SNR = 25;
UE(1).cfo = 0;
UE(1).speed = 5;
UE(1).DelaySpread = 3e-08;
UE(1).UL.Sym_len = 13;
UE(1).UL.Sym_start = 1;
UE(1).UL.mappingType = "typeA";
UE(1).UL.PRB_start = 0;
UE(1).UL.PRB_len = 20;
UE(1).UL.N_BWP_SIZE = 20;
UE(1).UL.newTX = true;
UE(1).UL.rv = 0;
UE(1).UL.rv_idx = 0;
UE(1).UL.soft_bits{1} = 0;
UE(1).UL.nLayers = 1;
UE(1).UL.MCS_table_no = 2;
UE(1).UL.MCS_index = 12;
UE(1).UL.DMRS.MIMO_UE_group = 1;
UE(1).UL.DMRS.n_scid = 0;
UE(1).UL.DMRS.scramblingID0 = 300;
UE(1).UL.DMRS.scramblingID1 = 300;
UE(1).UL.DMRS.dmrs_Type = "Type1";
UE(1).UL.DMRS.powerControlOffset = 0;
UE(1).UL.DMRS.reference_RB = 0;
UE(1).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(1).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(1).UL.DMRS.maxLength = "len1";
UE(1).UL.DMRS.ports = 1000;
UE(1).UL.DMRS.cdm_nodata = 2;
UE(1).UL.DMRS.startingRB = 0;
UE(1).UL.DMRS.nrofRBs = 20;
UE(1).UL.PRB_bundle = 1;
UE(1).LDPC_iter = 25;
UE(2).UID = 2;
UE(2).C_RNTI = 2;
UE(2).num_ant = 1;
UE(2).SNR = 25;
UE(2).cfo = 0;
UE(2).speed = 5;
UE(2).DelaySpread = 3e-08;
UE(2).UL.Sym_len = 14;
UE(2).UL.Sym_start = 0;
UE(2).UL.mappingType = "typeA";
UE(2).UL.PRB_start = 20;
UE(2).UL.PRB_len = 20;
UE(2).UL.N_BWP_SIZE = 20;
UE(2).UL.newTX = true;
UE(2).UL.rv = 0;
UE(2).UL.rv_idx = 0;
UE(2).UL.soft_bits{1} = 0;
UE(2).UL.nLayers = 1;
UE(2).UL.MCS_table_no = 2;
UE(2).UL.MCS_index = 21;
UE(2).UL.DMRS.MIMO_UE_group = 2;
UE(2).UL.DMRS.n_scid = 0;
UE(2).UL.DMRS.scramblingID0 = 300;
UE(2).UL.DMRS.scramblingID1 = 300;
UE(2).UL.DMRS.dmrs_Type = "Type1";
UE(2).UL.DMRS.powerControlOffset = 0;
UE(2).UL.DMRS.reference_RB = 0;
UE(2).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(2).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(2).UL.DMRS.maxLength = "len2";
UE(2).UL.DMRS.ports = 1000;
UE(2).UL.DMRS.cdm_nodata = 2;
UE(2).UL.DMRS.startingRB = 20;
UE(2).UL.DMRS.nrofRBs = 20;
UE(2).UL.PRB_bundle = 1;
UE(2).LDPC_iter = 25;
UE(3).UID = 3;
UE(3).C_RNTI = 3;
UE(3).num_ant = 1;
UE(3).SNR = 25;
UE(3).cfo = 0;
UE(3).speed = 5;
UE(3).DelaySpread = 3e-08;
UE(3).UL.Sym_len = 14;
UE(3).UL.Sym_start = 0;
UE(3).UL.mappingType = "typeA";
UE(3).UL.PRB_start = 40;
UE(3).UL.PRB_len = 20;
UE(3).UL.N_BWP_SIZE = 20;
UE(3).UL.newTX = true;
UE(3).UL.rv = 0;
UE(3).UL.rv_idx = 0;
UE(3).UL.soft_bits{1} = 0;
UE(3).UL.nLayers = 1;
UE(3).UL.MCS_table_no = 2;
UE(3).UL.MCS_index = 13;
UE(3).UL.DMRS.MIMO_UE_group = 3;
UE(3).UL.DMRS.n_scid = 0;
UE(3).UL.DMRS.scramblingID0 = 300;
UE(3).UL.DMRS.scramblingID1 = 300;
UE(3).UL.DMRS.dmrs_Type = "Type1";
UE(3).UL.DMRS.powerControlOffset = 0;
UE(3).UL.DMRS.reference_RB = 0;
UE(3).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(3).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(3).UL.DMRS.maxLength = "len1";
UE(3).UL.DMRS.ports = 1000;
UE(3).UL.DMRS.cdm_nodata = 2;
UE(3).UL.DMRS.startingRB = 40;
UE(3).UL.DMRS.nrofRBs = 20;
UE(3).UL.PRB_bundle = 1;
UE(3).LDPC_iter = 25;
UE(4).UID = 4;
UE(4).C_RNTI = 4;
UE(4).num_ant = 1;
UE(4).SNR = 25;
UE(4).cfo = 0;
UE(4).speed = 5;
UE(4).DelaySpread = 3e-08;
UE(4).UL.Sym_len = 14;
UE(4).UL.Sym_start = 0;
UE(4).UL.mappingType = "typeA";
UE(4).UL.PRB_start = 60;
UE(4).UL.PRB_len = 20;
UE(4).UL.N_BWP_SIZE = 20;
UE(4).UL.newTX = true;
UE(4).UL.rv = 0;
UE(4).UL.rv_idx = 0;
UE(4).UL.soft_bits{1} = 0;
UE(4).UL.nLayers = 1;
UE(4).UL.MCS_table_no = 2;
UE(4).UL.MCS_index = 22;
UE(4).UL.DMRS.MIMO_UE_group = 4;
UE(4).UL.DMRS.n_scid = 0;
UE(4).UL.DMRS.scramblingID0 = 300;
UE(4).UL.DMRS.scramblingID1 = 300;
UE(4).UL.DMRS.dmrs_Type = "Type1";
UE(4).UL.DMRS.powerControlOffset = 0;
UE(4).UL.DMRS.reference_RB = 0;
UE(4).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(4).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(4).UL.DMRS.maxLength = "len2";
UE(4).UL.DMRS.ports = 1000;
UE(4).UL.DMRS.cdm_nodata = 1;
UE(4).UL.DMRS.startingRB = 60;
UE(4).UL.DMRS.nrofRBs = 20;
UE(4).UL.PRB_bundle = 1;
UE(4).LDPC_iter = 25;
UE(5).UID = 5;
UE(5).C_RNTI = 5;
UE(5).num_ant = 1;
UE(5).SNR = 25;
UE(5).cfo = 0;
UE(5).speed = 5;
UE(5).DelaySpread = 3e-08;
UE(5).UL.Sym_len = 14;
UE(5).UL.Sym_start = 0;
UE(5).UL.mappingType = "typeA";
UE(5).UL.PRB_start = 80;
UE(5).UL.PRB_len = 20;
UE(5).UL.N_BWP_SIZE = 20;
UE(5).UL.newTX = true;
UE(5).UL.rv = 0;
UE(5).UL.rv_idx = 0;
UE(5).UL.soft_bits{1} = 0;
UE(5).UL.nLayers = 1;
UE(5).UL.MCS_table_no = 2;
UE(5).UL.MCS_index = 14;
UE(5).UL.DMRS.MIMO_UE_group = 5;
UE(5).UL.DMRS.n_scid = 0;
UE(5).UL.DMRS.scramblingID0 = 300;
UE(5).UL.DMRS.scramblingID1 = 300;
UE(5).UL.DMRS.dmrs_Type = "Type1";
UE(5).UL.DMRS.powerControlOffset = 0;
UE(5).UL.DMRS.reference_RB = 0;
UE(5).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(5).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(5).UL.DMRS.maxLength = "len1";
UE(5).UL.DMRS.ports = 1000;
UE(5).UL.DMRS.cdm_nodata = 0;
UE(5).UL.DMRS.startingRB = 80;
UE(5).UL.DMRS.nrofRBs = 20;
UE(5).UL.PRB_bundle = 1;
UE(5).LDPC_iter = 25;
UE(6).UID = 6;
UE(6).C_RNTI = 6;
UE(6).num_ant = 1;
UE(6).SNR = 25;
UE(6).cfo = 0;
UE(6).speed = 5;
UE(6).DelaySpread = 3e-08;
UE(6).UL.Sym_len = 13;
UE(6).UL.Sym_start = 1;
UE(6).UL.mappingType = "typeA";
UE(6).UL.PRB_start = 100;
UE(6).UL.PRB_len = 20;
UE(6).UL.N_BWP_SIZE = 20;
UE(6).UL.newTX = true;
UE(6).UL.rv = 0;
UE(6).UL.rv_idx = 0;
UE(6).UL.soft_bits{1} = 0;
UE(6).UL.nLayers = 1;
UE(6).UL.MCS_table_no = 2;
UE(6).UL.MCS_index = 23;
UE(6).UL.DMRS.MIMO_UE_group = 6;
UE(6).UL.DMRS.n_scid = 0;
UE(6).UL.DMRS.scramblingID0 = 300;
UE(6).UL.DMRS.scramblingID1 = 300;
UE(6).UL.DMRS.dmrs_Type = "Type1";
UE(6).UL.DMRS.powerControlOffset = 0;
UE(6).UL.DMRS.reference_RB = 0;
UE(6).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(6).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(6).UL.DMRS.maxLength = "len2";
UE(6).UL.DMRS.ports = 1000;
UE(6).UL.DMRS.cdm_nodata = 2;
UE(6).UL.DMRS.startingRB = 100;
UE(6).UL.DMRS.nrofRBs = 20;
UE(6).UL.PRB_bundle = 1;
UE(6).LDPC_iter = 25;
UE(7).UID = 7;
UE(7).C_RNTI = 7;
UE(7).num_ant = 1;
UE(7).SNR = 25;
UE(7).cfo = 0;
UE(7).speed = 5;
UE(7).DelaySpread = 3e-08;
UE(7).UL.Sym_len = 14;
UE(7).UL.Sym_start = 0;
UE(7).UL.mappingType = "typeA";
UE(7).UL.PRB_start = 120;
UE(7).UL.PRB_len = 20;
UE(7).UL.N_BWP_SIZE = 20;
UE(7).UL.newTX = true;
UE(7).UL.rv = 0;
UE(7).UL.rv_idx = 0;
UE(7).UL.soft_bits{1} = 0;
UE(7).UL.nLayers = 1;
UE(7).UL.MCS_table_no = 2;
UE(7).UL.MCS_index = 15;
UE(7).UL.DMRS.MIMO_UE_group = 7;
UE(7).UL.DMRS.n_scid = 0;
UE(7).UL.DMRS.scramblingID0 = 300;
UE(7).UL.DMRS.scramblingID1 = 300;
UE(7).UL.DMRS.dmrs_Type = "Type1";
UE(7).UL.DMRS.powerControlOffset = 0;
UE(7).UL.DMRS.reference_RB = 0;
UE(7).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(7).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(7).UL.DMRS.maxLength = "len1";
UE(7).UL.DMRS.ports = 1000;
UE(7).UL.DMRS.cdm_nodata = 1;
UE(7).UL.DMRS.startingRB = 120;
UE(7).UL.DMRS.nrofRBs = 20;
UE(7).UL.PRB_bundle = 1;
UE(7).LDPC_iter = 25;
UE(8).UID = 8;
UE(8).C_RNTI = 8;
UE(8).num_ant = 1;
UE(8).SNR = 25;
UE(8).cfo = 0;
UE(8).speed = 5;
UE(8).DelaySpread = 3e-08;
UE(8).UL.Sym_len = 14;
UE(8).UL.Sym_start = 0;
UE(8).UL.mappingType = "typeA";
UE(8).UL.PRB_start = 140;
UE(8).UL.PRB_len = 20;
UE(8).UL.N_BWP_SIZE = 20;
UE(8).UL.newTX = true;
UE(8).UL.rv = 0;
UE(8).UL.rv_idx = 0;
UE(8).UL.soft_bits{1} = 0;
UE(8).UL.nLayers = 1;
UE(8).UL.MCS_table_no = 2;
UE(8).UL.MCS_index = 24;
UE(8).UL.DMRS.MIMO_UE_group = 8;
UE(8).UL.DMRS.n_scid = 0;
UE(8).UL.DMRS.scramblingID0 = 300;
UE(8).UL.DMRS.scramblingID1 = 300;
UE(8).UL.DMRS.dmrs_Type = "Type1";
UE(8).UL.DMRS.powerControlOffset = 0;
UE(8).UL.DMRS.reference_RB = 0;
UE(8).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(8).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(8).UL.DMRS.maxLength = "len2";
UE(8).UL.DMRS.ports = 1000;
UE(8).UL.DMRS.cdm_nodata = 0;
UE(8).UL.DMRS.startingRB = 140;
UE(8).UL.DMRS.nrofRBs = 20;
UE(8).UL.PRB_bundle = 1;
UE(8).LDPC_iter = 25;
UE(9).UID = 9;
UE(9).C_RNTI = 9;
UE(9).num_ant = 1;
UE(9).SNR = 25;
UE(9).cfo = 0;
UE(9).speed = 5;
UE(9).DelaySpread = 3e-08;
UE(9).UL.Sym_len = 14;
UE(9).UL.Sym_start = 0;
UE(9).UL.mappingType = "typeA";
UE(9).UL.PRB_start = 160;
UE(9).UL.PRB_len = 20;
UE(9).UL.N_BWP_SIZE = 20;
UE(9).UL.newTX = true;
UE(9).UL.rv = 0;
UE(9).UL.rv_idx = 0;
UE(9).UL.soft_bits{1} = 0;
UE(9).UL.nLayers = 1;
UE(9).UL.MCS_table_no = 2;
UE(9).UL.MCS_index = 16;
UE(9).UL.DMRS.MIMO_UE_group = 9;
UE(9).UL.DMRS.n_scid = 0;
UE(9).UL.DMRS.scramblingID0 = 300;
UE(9).UL.DMRS.scramblingID1 = 300;
UE(9).UL.DMRS.dmrs_Type = "Type1";
UE(9).UL.DMRS.powerControlOffset = 0;
UE(9).UL.DMRS.reference_RB = 0;
UE(9).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(9).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(9).UL.DMRS.maxLength = "len1";
UE(9).UL.DMRS.ports = 1000;
UE(9).UL.DMRS.cdm_nodata = 2;
UE(9).UL.DMRS.startingRB = 160;
UE(9).UL.DMRS.nrofRBs = 20;
UE(9).UL.PRB_bundle = 1;
UE(9).LDPC_iter = 25;
UE(10).UID = 10;
UE(10).C_RNTI = 10;
UE(10).num_ant = 1;
UE(10).SNR = 25;
UE(10).cfo = 0;
UE(10).speed = 5;
UE(10).DelaySpread = 3e-08;
UE(10).UL.Sym_len = 14;
UE(10).UL.Sym_start = 0;
UE(10).UL.mappingType = "typeA";
UE(10).UL.PRB_start = 180;
UE(10).UL.PRB_len = 20;
UE(10).UL.N_BWP_SIZE = 20;
UE(10).UL.newTX = true;
UE(10).UL.rv = 0;
UE(10).UL.rv_idx = 0;
UE(10).UL.soft_bits{1} = 0;
UE(10).UL.nLayers = 1;
UE(10).UL.MCS_table_no = 2;
UE(10).UL.MCS_index = 25;
UE(10).UL.DMRS.MIMO_UE_group = 10;
UE(10).UL.DMRS.n_scid = 0;
UE(10).UL.DMRS.scramblingID0 = 300;
UE(10).UL.DMRS.scramblingID1 = 300;
UE(10).UL.DMRS.dmrs_Type = "Type1";
UE(10).UL.DMRS.powerControlOffset = 0;
UE(10).UL.DMRS.reference_RB = 0;
UE(10).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(10).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(10).UL.DMRS.maxLength = "len2";
UE(10).UL.DMRS.ports = 1000;
UE(10).UL.DMRS.cdm_nodata = 2;
UE(10).UL.DMRS.startingRB = 180;
UE(10).UL.DMRS.nrofRBs = 20;
UE(10).UL.PRB_bundle = 1;
UE(10).LDPC_iter = 25;
UE(11).UID = 11;
UE(11).C_RNTI = 11;
UE(11).num_ant = 1;
UE(11).SNR = 25;
UE(11).cfo = 0;
UE(11).speed = 5;
UE(11).DelaySpread = 3e-08;
UE(11).UL.Sym_len = 14;
UE(11).UL.Sym_start = 0;
UE(11).UL.mappingType = "typeA";
UE(11).UL.PRB_start = 200;
UE(11).UL.PRB_len = 10;
UE(11).UL.N_BWP_SIZE = 10;
UE(11).UL.newTX = true;
UE(11).UL.rv = 0;
UE(11).UL.rv_idx = 0;
UE(11).UL.soft_bits{1} = 0;
UE(11).UL.nLayers = 1;
UE(11).UL.MCS_table_no = 2;
UE(11).UL.MCS_index = 17;
UE(11).UL.DMRS.MIMO_UE_group = 11;
UE(11).UL.DMRS.n_scid = 0;
UE(11).UL.DMRS.scramblingID0 = 300;
UE(11).UL.DMRS.scramblingID1 = 300;
UE(11).UL.DMRS.dmrs_Type = "Type1";
UE(11).UL.DMRS.powerControlOffset = 0;
UE(11).UL.DMRS.reference_RB = 0;
UE(11).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(11).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(11).UL.DMRS.maxLength = "len1";
UE(11).UL.DMRS.ports = 1000;
UE(11).UL.DMRS.cdm_nodata = 0;
UE(11).UL.DMRS.startingRB = 200;
UE(11).UL.DMRS.nrofRBs = 10;
UE(11).UL.PRB_bundle = 1;
UE(11).LDPC_iter = 25;
UE(12).UID = 12;
UE(12).C_RNTI = 12;
UE(12).num_ant = 1;
UE(12).SNR = 25;
UE(12).cfo = 0;
UE(12).speed = 5;
UE(12).DelaySpread = 3e-08;
UE(12).UL.Sym_len = 14;
UE(12).UL.Sym_start = 0;
UE(12).UL.mappingType = "typeA";
UE(12).UL.PRB_start = 230;
UE(12).UL.PRB_len = 10;
UE(12).UL.N_BWP_SIZE = 10;
UE(12).UL.newTX = true;
UE(12).UL.rv = 0;
UE(12).UL.rv_idx = 0;
UE(12).UL.soft_bits{1} = 0;
UE(12).UL.nLayers = 1;
UE(12).UL.MCS_table_no = 2;
UE(12).UL.MCS_index = 26;
UE(12).UL.DMRS.MIMO_UE_group = 12;
UE(12).UL.DMRS.n_scid = 0;
UE(12).UL.DMRS.scramblingID0 = 300;
UE(12).UL.DMRS.scramblingID1 = 300;
UE(12).UL.DMRS.dmrs_Type = "Type1";
UE(12).UL.DMRS.powerControlOffset = 0;
UE(12).UL.DMRS.reference_RB = 0;
UE(12).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(12).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(12).UL.DMRS.maxLength = "len2";
UE(12).UL.DMRS.ports = 1000;
UE(12).UL.DMRS.cdm_nodata = 1;
UE(12).UL.DMRS.startingRB = 230;
UE(12).UL.DMRS.nrofRBs = 10;
UE(12).UL.PRB_bundle = 1;
UE(12).LDPC_iter = 25;
UE(13).UID = 13;
UE(13).C_RNTI = 13;
UE(13).num_ant = 1;
UE(13).SNR = 25;
UE(13).cfo = 0;
UE(13).speed = 5;
UE(13).DelaySpread = 3e-08;
UE(13).UL.Sym_len = 13;
UE(13).UL.Sym_start = 1;
UE(13).UL.mappingType = "typeA";
UE(13).UL.PRB_start = 240;
UE(13).UL.PRB_len = 10;
UE(13).UL.N_BWP_SIZE = 10;
UE(13).UL.newTX = true;
UE(13).UL.rv = 0;
UE(13).UL.rv_idx = 0;
UE(13).UL.soft_bits{1} = 0;
UE(13).UL.nLayers = 1;
UE(13).UL.MCS_table_no = 2;
UE(13).UL.MCS_index = 18;
UE(13).UL.DMRS.MIMO_UE_group = 13;
UE(13).UL.DMRS.n_scid = 0;
UE(13).UL.DMRS.scramblingID0 = 300;
UE(13).UL.DMRS.scramblingID1 = 300;
UE(13).UL.DMRS.dmrs_Type = "Type1";
UE(13).UL.DMRS.powerControlOffset = 0;
UE(13).UL.DMRS.reference_RB = 0;
UE(13).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(13).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(13).UL.DMRS.maxLength = "len1";
UE(13).UL.DMRS.ports = 1000;
UE(13).UL.DMRS.cdm_nodata = 0;
UE(13).UL.DMRS.startingRB = 240;
UE(13).UL.DMRS.nrofRBs = 10;
UE(13).UL.PRB_bundle = 1;
UE(13).LDPC_iter = 25;
UE(14).UID = 14;
UE(14).C_RNTI = 14;
UE(14).num_ant = 1;
UE(14).SNR = 25;
UE(14).cfo = 0;
UE(14).speed = 5;
UE(14).DelaySpread = 3e-08;
UE(14).UL.Sym_len = 14;
UE(14).UL.Sym_start = 0;
UE(14).UL.mappingType = "typeA";
UE(14).UL.PRB_start = 250;
UE(14).UL.PRB_len = 10;
UE(14).UL.N_BWP_SIZE = 10;
UE(14).UL.newTX = true;
UE(14).UL.rv = 0;
UE(14).UL.rv_idx = 0;
UE(14).UL.soft_bits{1} = 0;
UE(14).UL.nLayers = 1;
UE(14).UL.MCS_table_no = 2;
UE(14).UL.MCS_index = 27;
UE(14).UL.DMRS.MIMO_UE_group = 14;
UE(14).UL.DMRS.n_scid = 0;
UE(14).UL.DMRS.scramblingID0 = 300;
UE(14).UL.DMRS.scramblingID1 = 300;
UE(14).UL.DMRS.dmrs_Type = "Type1";
UE(14).UL.DMRS.powerControlOffset = 0;
UE(14).UL.DMRS.reference_RB = 0;
UE(14).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(14).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(14).UL.DMRS.maxLength = "len2";
UE(14).UL.DMRS.ports = 1000;
UE(14).UL.DMRS.cdm_nodata = 2;
UE(14).UL.DMRS.startingRB = 250;
UE(14).UL.DMRS.nrofRBs = 10;
UE(14).UL.PRB_bundle = 1;
UE(14).LDPC_iter = 25;
UE(15).UID = 15;
UE(15).C_RNTI = 15;
UE(15).num_ant = 1;
UE(15).SNR = 25;
UE(15).cfo = 0;
UE(15).speed = 5;
UE(15).DelaySpread = 3e-08;
UE(15).UL.Sym_len = 14;
UE(15).UL.Sym_start = 0;
UE(15).UL.mappingType = "typeA";
UE(15).UL.PRB_start = 260;
UE(15).UL.PRB_len = 2;
UE(15).UL.N_BWP_SIZE = 2;
UE(15).UL.newTX = true;
UE(15).UL.rv = 0;
UE(15).UL.rv_idx = 0;
UE(15).UL.soft_bits{1} = 0;
UE(15).UL.nLayers = 1;
UE(15).UL.MCS_table_no = 2;
UE(15).UL.MCS_index = 19;
UE(15).UL.DMRS.MIMO_UE_group = 15;
UE(15).UL.DMRS.n_scid = 0;
UE(15).UL.DMRS.scramblingID0 = 300;
UE(15).UL.DMRS.scramblingID1 = 300;
UE(15).UL.DMRS.dmrs_Type = "Type1";
UE(15).UL.DMRS.powerControlOffset = 0;
UE(15).UL.DMRS.reference_RB = 0;
UE(15).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(15).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(15).UL.DMRS.maxLength = "len1";
UE(15).UL.DMRS.ports = 1000;
UE(15).UL.DMRS.cdm_nodata = 0;
UE(15).UL.DMRS.startingRB = 260;
UE(15).UL.DMRS.nrofRBs = 2;
UE(15).UL.PRB_bundle = 1;
UE(15).LDPC_iter = 25;
UE(16).UID = 16;
UE(16).C_RNTI = 16;
UE(16).num_ant = 1;
UE(16).SNR = 25;
UE(16).cfo = 0;
UE(16).speed = 5;
UE(16).DelaySpread = 3e-08;
UE(16).UL.Sym_len = 14;
UE(16).UL.Sym_start = 0;
UE(16).UL.mappingType = "typeA";
UE(16).UL.PRB_start = 262;
UE(16).UL.PRB_len = 2;
UE(16).UL.N_BWP_SIZE = 2;
UE(16).UL.newTX = true;
UE(16).UL.rv = 0;
UE(16).UL.rv_idx = 0;
UE(16).UL.soft_bits{1} = 0;
UE(16).UL.nLayers = 1;
UE(16).UL.MCS_table_no = 2;
UE(16).UL.MCS_index = 20;
UE(16).UL.DMRS.MIMO_UE_group = 16;
UE(16).UL.DMRS.n_scid = 0;
UE(16).UL.DMRS.scramblingID0 = 300;
UE(16).UL.DMRS.scramblingID1 = 300;
UE(16).UL.DMRS.dmrs_Type = "Type1";
UE(16).UL.DMRS.powerControlOffset = 0;
UE(16).UL.DMRS.reference_RB = 0;
UE(16).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(16).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(16).UL.DMRS.maxLength = "len2";
UE(16).UL.DMRS.ports = 1000;
UE(16).UL.DMRS.cdm_nodata = 1;
UE(16).UL.DMRS.startingRB = 262;
UE(16).UL.DMRS.nrofRBs = 2;
UE(16).UL.PRB_bundle = 1;
UE(16).LDPC_iter = 25;
UE(17).UID = 17;
UE(17).C_RNTI = 17;
UE(17).num_ant = 1;
UE(17).SNR = 25;
UE(17).cfo = 0;
UE(17).speed = 5;
UE(17).DelaySpread = 3e-08;
UE(17).UL.Sym_len = 14;
UE(17).UL.Sym_start = 0;
UE(17).UL.mappingType = "typeA";
UE(17).UL.PRB_start = 264;
UE(17).UL.PRB_len = 2;
UE(17).UL.N_BWP_SIZE = 2;
UE(17).UL.newTX = true;
UE(17).UL.rv = 0;
UE(17).UL.rv_idx = 0;
UE(17).UL.soft_bits{1} = 0;
UE(17).UL.nLayers = 1;
UE(17).UL.MCS_table_no = 2;
UE(17).UL.MCS_index = 21;
UE(17).UL.DMRS.MIMO_UE_group = 17;
UE(17).UL.DMRS.n_scid = 0;
UE(17).UL.DMRS.scramblingID0 = 300;
UE(17).UL.DMRS.scramblingID1 = 300;
UE(17).UL.DMRS.dmrs_Type = "Type1";
UE(17).UL.DMRS.powerControlOffset = 0;
UE(17).UL.DMRS.reference_RB = 0;
UE(17).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(17).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(17).UL.DMRS.maxLength = "len1";
UE(17).UL.DMRS.ports = 1000;
UE(17).UL.DMRS.cdm_nodata = 2;
UE(17).UL.DMRS.startingRB = 264;
UE(17).UL.DMRS.nrofRBs = 2;
UE(17).UL.PRB_bundle = 1;
UE(17).LDPC_iter = 25;
UE(18).UID = 18;
UE(18).C_RNTI = 18;
UE(18).num_ant = 1;
UE(18).SNR = 25;
UE(18).cfo = 0;
UE(18).speed = 5;
UE(18).DelaySpread = 3e-08;
UE(18).UL.Sym_len = 14;
UE(18).UL.Sym_start = 0;
UE(18).UL.mappingType = "typeA";
UE(18).UL.PRB_start = 266;
UE(18).UL.PRB_len = 2;
UE(18).UL.N_BWP_SIZE = 2;
UE(18).UL.newTX = true;
UE(18).UL.rv = 0;
UE(18).UL.rv_idx = 0;
UE(18).UL.soft_bits{1} = 0;
UE(18).UL.nLayers = 1;
UE(18).UL.MCS_table_no = 2;
UE(18).UL.MCS_index = 22;
UE(18).UL.DMRS.MIMO_UE_group = 18;
UE(18).UL.DMRS.n_scid = 0;
UE(18).UL.DMRS.scramblingID0 = 300;
UE(18).UL.DMRS.scramblingID1 = 300;
UE(18).UL.DMRS.dmrs_Type = "Type1";
UE(18).UL.DMRS.powerControlOffset = 0;
UE(18).UL.DMRS.reference_RB = 0;
UE(18).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(18).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(18).UL.DMRS.maxLength = "len2";
UE(18).UL.DMRS.ports = 1000;
UE(18).UL.DMRS.cdm_nodata = 0;
UE(18).UL.DMRS.startingRB = 266;
UE(18).UL.DMRS.nrofRBs = 2;
UE(18).UL.PRB_bundle = 1;
UE(18).LDPC_iter = 25;
UE(19).UID = 19;
UE(19).C_RNTI = 19;
UE(19).num_ant = 1;
UE(19).SNR = 25;
UE(19).cfo = 0;
UE(19).speed = 5;
UE(19).DelaySpread = 3e-08;
UE(19).UL.Sym_len = 13;
UE(19).UL.Sym_start = 1;
UE(19).UL.mappingType = "typeA";
UE(19).UL.PRB_start = 268;
UE(19).UL.PRB_len = 2;
UE(19).UL.N_BWP_SIZE = 2;
UE(19).UL.newTX = true;
UE(19).UL.rv = 0;
UE(19).UL.rv_idx = 0;
UE(19).UL.soft_bits{1} = 0;
UE(19).UL.nLayers = 1;
UE(19).UL.MCS_table_no = 2;
UE(19).UL.MCS_index = 23;
UE(19).UL.DMRS.MIMO_UE_group = 19;
UE(19).UL.DMRS.n_scid = 0;
UE(19).UL.DMRS.scramblingID0 = 300;
UE(19).UL.DMRS.scramblingID1 = 300;
UE(19).UL.DMRS.dmrs_Type = "Type1";
UE(19).UL.DMRS.powerControlOffset = 0;
UE(19).UL.DMRS.reference_RB = 0;
UE(19).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(19).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(19).UL.DMRS.maxLength = "len2";
UE(19).UL.DMRS.ports = 1000;
UE(19).UL.DMRS.cdm_nodata = 2;
UE(19).UL.DMRS.startingRB = 268;
UE(19).UL.DMRS.nrofRBs = 2;
UE(19).UL.PRB_bundle = 1;
UE(19).LDPC_iter = 25;
UE(20).UID = 20;
UE(20).C_RNTI = 20;
UE(20).num_ant = 1;
UE(20).SNR = 25;
UE(20).cfo = 0;
UE(20).speed = 5;
UE(20).DelaySpread = 3e-08;
UE(20).UL.Sym_len = 14;
UE(20).UL.Sym_start = 0;
UE(20).UL.mappingType = "typeA";
UE(20).UL.PRB_start = 271;
UE(20).UL.PRB_len = 2;
UE(20).UL.N_BWP_SIZE = 3;
UE(20).UL.newTX = true;
UE(20).UL.rv = 0;
UE(20).UL.rv_idx = 0;
UE(20).UL.soft_bits{1} = 0;
UE(20).UL.nLayers = 1;
UE(20).UL.MCS_table_no = 2;
UE(20).UL.MCS_index = 24;
UE(20).UL.DMRS.MIMO_UE_group = 20;
UE(20).UL.DMRS.n_scid = 0;
UE(20).UL.DMRS.scramblingID0 = 300;
UE(20).UL.DMRS.scramblingID1 = 300;
UE(20).UL.DMRS.dmrs_Type = "Type1";
UE(20).UL.DMRS.powerControlOffset = 0;
UE(20).UL.DMRS.reference_RB = 0;
UE(20).UL.DMRS.dmrs_TypeA_Position = "pos2";
UE(20).UL.DMRS.dmrs_AdditionalPosition = "pos0";
UE(20).UL.DMRS.maxLength = "len1";
UE(20).UL.DMRS.ports = 1000;
UE(20).UL.DMRS.cdm_nodata = 0;
UE(20).UL.DMRS.startingRB = 271;
UE(20).UL.DMRS.nrofRBs = 2;
UE(20).UL.PRB_bundle = 1;
UE(20).LDPC_iter = 25;
for NU = 1:20
    UE(NU).UL.Precoder = repmat(eye(UE(NU).UL.nLayers),1,1,UE(NU).UL.PRB_len/UE(NU).UL.PRB_bundle);
    [UE(NU).UL.Modulation, UE(NU).UL.Mod, UE(NU).UL.R] = MCS_nr_mapping(UE(NU).UL.MCS_table_no, UE(NU).UL.MCS_index);
end
clearvars -except SYS UE 
